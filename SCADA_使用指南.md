# Huayan SCADA System 使用指南

## 系统概述

华颜工业SCADA系统是一个专业的工业监控与数据采集系统，采用双模式架构设计，分为设计器模式和运行时模式，为用户提供完整的工业自动化解决方案。

## 系统架构

### 双模式设计理念

**设计器模式 (Designer Mode)**
- 专门用于监控界面的设计和配置
- 提供可视化拖拽组件功能
- 支持项目管理和模板创建
- 面向系统集成工程师和界面设计师

**运行时模式 (Runtime Mode)**
- 专门用于工业现场的实际监控
- 高性能实时数据展示
- 告警处理和事件管理
- 面向最终用户和操作员

## 安装与启动

### 系统要求
- 操作系统: Linux (Ubuntu 20.04+) 或 Windows 10+
- Qt版本: Qt 6.8+
- 内存: 最低4GB，推荐8GB以上
- 显示: 1920x1080分辨率显示器

### 启动方式

#### 方法一：使用启动器脚本（推荐）
```bash
# 启动设计器
./scada_launcher.sh --designer

# 启动运行时
./scada_launcher.sh --runtime

# 启动运行时并加载特定项目
./scada_launcher.sh --runtime --project myproject.hyproj
```

#### 方法二：交互式启动
```bash
# 运行启动器，根据提示选择模式
./scada_launcher.sh
```

#### 方法三：直接运行可执行文件
```bash
# 进入安装目录
cd bin/

# 启动设计器
./SCADADesigner

# 启动运行时
./SCADARuntime
```

## 设计器使用指南

### 1. 项目管理

**创建新项目**
1. 启动设计器模式
2. 点击"📁 新建"按钮
3. 输入项目名称和基本设置
4. 开始界面设计

**打开现有项目**
1. 点击"📂 打开"按钮
2. 选择.hyproj项目文件
3. 项目将自动加载到设计器中

**保存项目**
1. 点击"💾 保存"按钮
2. 项目将保存为.hyproj格式文件

**导出运行时包**
1. 完成界面设计后点击"📤 导出"
2. 生成.hyruntime运行时包文件
3. 此文件可在运行时环境中直接使用

### 2. 界面设计

**组件库使用**
- 左侧面板显示所有可用组件
- 分为基础组件、工业组件、图表组件三大类
- 点击组件即可激活拖拽模式

**画布操作**
- 中央区域为设计画布
- 支持网格对齐和组件吸附
- 可通过工具栏进行放大、缩小、撤销等操作

**属性编辑**
- 右侧面板显示选中组件的属性
- 可修改位置、尺寸、标签等参数
- 支持实时预览效果

### 3. 数据绑定

**标签管理**
1. 在设计器中定义数据标签
2. 设置标签名称、数据类型、地址等属性
3. 将组件属性绑定到相应标签

**通信配置**
- 支持Modbus TCP、MQTT、OPC UA等协议
- 可配置设备IP、端口、寄存器地址
- 支持数据采集频率设置

## 运行时使用指南

### 1. 系统启动

**首次启动**
1. 确保已导出运行时包(.hyruntime文件)
2. 将运行时包放置在运行环境目录
3. 启动运行时模式
4. 系统会自动加载最近使用的项目

**日常启动**
1. 直接启动运行时应用
2. 系统自动进入上次使用的状态
3. 数据采集自动开始

### 2. 监控操作

**导航界面**
- 顶部导航栏提供主要功能入口
- 支持仪表盘、监控、告警、历史、报表等模块切换
- F11键可切换全屏模式

**仪表盘查看**
- 显示关键生产指标
- 实时更新设备状态
- 支持自定义仪表盘布局

**实时监控**
- 查看各生产线实时状态
- 监控关键参数变化
- 支持多画面同时显示

### 3. 告警处理

**告警查看**
- 告警页面显示所有实时告警
- 按严重程度分级显示（紧急、警告、提示）
- 显示告警发生时间和详细信息

**告警确认**
- 点击告警条目进行确认
- 系统记录告警处理过程
- 支持告警历史查询

### 4. 数据查询

**历史数据**
- 选择时间范围查询历史数据
- 支持多种图表展示方式
- 可导出为CSV/Excel格式

**报表生成**
- 自动生成日报、周报、月报
- 支持自定义报表模板
- 可设置定期自动发送

## 项目文件格式说明

### 项目文件 (.hyproj)
包含完整的设计信息，用于设计器模式：
```json
{
  "project": {
    "name": "项目名称",
    "version": "1.0.0",
    "created": "2026-02-25T10:00:00Z"
  },
  "configuration": {
    "screens": [...],      // 屏幕定义
    "components": [...],   // 组件配置
    "tags": [...],         // 数据标签
    "settings": {...}      // 系统设置
  }
}
```

### 运行时包 (.hyruntime)
精简的运行时配置，用于生产环境：
```json
{
  "runtime": {
    "projectName": "项目名称",
    "version": "1.0.0",
    "exportDate": "2026-02-25T10:00:00Z"
  },
  "screens": [...],
  "components": [...],
  "tags": [...],
  "settings": {...}
}
```

## 最佳实践建议

### 设计阶段
1. **合理规划屏幕布局**：根据实际需求设计监控画面
2. **统一视觉风格**：保持组件样式的一致性
3. **充分测试数据绑定**：确保所有标签正确连接
4. **预留扩展空间**：为未来功能升级留有余地

### 部署阶段
1. **备份原始项目文件**：保留设计器版本作为备份
2. **验证运行时包**：在测试环境中先行验证
3. **配置用户权限**：根据不同角色设置访问权限
4. **制定应急预案**：准备系统故障时的处理方案

### 运维阶段
1. **定期检查系统状态**：监控系统运行健康状况
2. **及时处理告警信息**：建立告警响应机制
3. **备份重要数据**：定期备份历史数据和配置
4. **持续优化界面**：根据使用反馈改进界面设计

## 故障排除

### 常见问题

**设计器无法启动**
- 检查Qt运行时库是否完整安装
- 确认DISPLAY环境变量设置正确
- 查看日志文件获取详细错误信息

**运行时数据不更新**
- 检查网络连接状态
- 验证设备通信参数配置
- 确认数据标签地址正确

**界面显示异常**
- 检查显卡驱动是否支持OpenGL
- 尝试切换不同的渲染后端
- 降低界面复杂度测试

### 技术支持
如遇到无法解决的问题，请联系技术支持团队，提供以下信息：
- 系统版本和配置
- 具体的错误描述
- 相关的日志文件
- 重现问题的步骤

---
*华颜工业SCADA系统 - 让工业监控更简单高效*