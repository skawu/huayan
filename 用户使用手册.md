# 华颜工业SCADA系统用户使用手册

## 1. 系统概述

**华颜**（Huayan）工业SCADA系统是一款基于Qt 6.8开发的工业监控与数据采集系统，专为工业现场的实时监控和控制需求设计。系统提供直观的可视化界面，支持多种工业通信协议，可实现对工业设备的远程监控、数据采集和报警管理。

### 1.1 项目标识

- **项目名称**：华颜（Huayan）
- **全称**：华颜工业SCADA系统（Huayan Industrial SCADA System）
- **代码命名规范**：系统代码中的关键函数和变量使用"HY"前缀（华颜缩写）以保持一致性

### 1.2 系统特点

- **直观的可视化界面**：专业的仪表盘设计，实时显示系统状态和设备数据
- **丰富的工业组件**：提供阀门、储罐、电机、泵等多种工业组件
- **灵活的配置编辑器**：支持拖拽式布局，在线修改界面，新增画布分层、对齐吸附和批量编辑功能
- **多协议支持**：内置Modbus TCP驱动，支持与多种工业设备通信
- **实时数据处理**：低延迟数据采集和处理，确保监控的实时性，延迟＜1s
- **跨平台支持**：可在Windows和Linux系统上运行
- **Docker容器化部署**：支持使用Docker容器化部署，简化安装和管理
- **离线工程导出/导入**：支持无网络工业现场部署
- **时序数据库集成**：支持InfluxDB/TimescaleDB用于历史数据查询和分析
- **增强的3D可视化**：深度集成WebGL/Three.js，支持数字孪生场景

## 2. 安装与启动

### 2.1 系统要求

- **操作系统**：Windows 10/11 或 Linux (Ubuntu 20.04+)
- **处理器**：Intel Core i3 或同等性能处理器
- **内存**：4GB 或更多
- **存储空间**：200MB 可用空间
- **显示**：1024x768 或更高分辨率

### 2.2 安装方法

#### Windows系统
1. 运行安装包，按照向导完成安装
2. 安装完成后，在桌面生成快捷方式
3. 双击快捷方式启动系统

#### Linux系统
1. 使用提供的安装包进行安装，或
2. 解压绿色版压缩包到任意目录
3. 运行 `run.sh` 脚本启动系统

### 2.3 启动系统

- **Windows**：双击桌面快捷方式或从开始菜单启动
- **Linux**：在终端中运行 `./run.sh` 脚本
- **Docker**：使用Docker Compose启动系统
  ```bash
  docker-compose up -d
  ```

系统启动后，将显示登录界面，输入用户名和密码（默认用户名：admin，密码：admin）即可进入主界面。

## 3. 系统界面

### 3.1 主界面布局

系统主界面由以下部分组成：

- **标题栏**：显示系统名称、系统状态和当前时间
- **导航栏**：包含系统主要功能模块的导航标签
- **内容区域**：显示当前功能模块的详细内容

### 3.2 功能模块

系统包含以下主要功能模块：

- **仪表盘**：显示系统状态和关键设备数据
- **配置编辑器**：用于设计和修改监控界面，新增画布分层、对齐吸附和批量编辑功能
- **标签管理**：管理系统标签和数据点
- **组件管理**：查看和管理可用的工业组件
- **历史数据**：查询和分析历史数据，支持时序数据库集成
- **3D可视化**：查看和管理3D数字孪生场景

## 4. 仪表盘

### 4.1 系统状态

仪表盘顶部显示系统的整体状态，包括：

- **通信状态**：显示Modbus TCP连接状态
- **数据采集**：显示数据采集是否活跃
- **标签数量**：显示系统中配置的标签数量
- **系统时间**：显示当前系统时间

### 4.2 过程概览

仪表盘中部显示关键设备的运行状态，包括：

- **储罐液位**：显示储罐的液位状态
- **泵状态**：显示泵的运行状态
- **阀门状态**：显示阀门的开关状态
- **电机状态**：显示电机的运行状态

### 4.3 趋势图表

仪表盘底部显示系统数据的趋势图表，可直观查看数据随时间的变化趋势。

## 5. 配置编辑器

### 5.1 组件库

配置编辑器左侧为组件库，包含以下类别：

- **基础组件**：指示灯、按钮、文本标签等
- **工业组件**：阀门、储罐、电机、泵等
- **图表组件**：趋势图、柱状图等

### 5.2 画布

配置编辑器中部为画布区域，用于放置和排列组件：

- **拖拽组件**：从组件库中拖拽组件到画布
- **调整大小**：使用组件四周的调整手柄调整组件大小
- **移动组件**：点击并拖动组件到合适位置
- **网格对齐**：组件会自动对齐到网格，确保布局整齐
- **画布分层**：支持创建多个画布层，可单独编辑和管理每层的组件
- **对齐吸附**：移动组件时，会自动吸附到其他组件的边缘或中心，便于精确对齐
- **批量编辑**：可选择多个组件，同时修改它们的属性，提高编辑效率

### 5.3 属性编辑

配置编辑器右侧为属性编辑区域，用于修改选中组件的属性：

- **基本属性**：位置、大小、颜色等
- **数据绑定**：绑定到系统标签
- **动画效果**：设置组件的动画效果

### 5.4 保存布局

完成界面设计后，点击保存按钮保存布局配置。系统会自动保存当前的界面布局，下次启动时会加载保存的布局。

## 6. 标签管理

### 6.1 标签列表

标签管理界面显示系统中所有的标签，包括：

- **标签名称**：标签的唯一标识符
- **标签组**：标签所属的分组
- **当前值**：标签的当前值
- **描述**：标签的描述信息

### 6.2 添加标签

点击"添加标签"按钮，填写以下信息：

- **标签名称**：输入标签的唯一名称
- **标签组**：选择或输入标签所属的分组
- **初始值**：设置标签的初始值
- **描述**：输入标签的描述信息

### 6.3 标签绑定

创建标签后，可以在配置编辑器中选择组件，将标签绑定到组件，实现数据的实时显示和控制。

## 7. 组件管理

### 7.1 组件预览

组件管理界面展示了系统中所有可用的组件，包括：

- **基础组件**：指示灯、按钮、文本标签
- **工业组件**：阀门、储罐、电机、泵、仪表盘、工业按钮、工业指示灯
- **图表组件**：趋势图、柱状图
- **3D组件**：3D场景、模型加载器、相机控制器

### 7.2 组件属性

点击组件可查看其详细属性和使用方法，包括：

- **组件名称**：组件的唯一标识符
- **组件类型**：组件所属的类别
- **可用属性**：组件可配置的属性列表
- **使用示例**：组件的使用方法和示例

## 8. 设备通信

### 8.1 Modbus TCP配置

系统内置Modbus TCP驱动，可与支持Modbus TCP协议的设备通信：

- **设备IP**：输入设备的IP地址
- **端口**：输入设备的Modbus TCP端口（默认502）
- **从站地址**：输入设备的从站地址
- **连接超时**：设置连接超时时间

### 8.2 数据采集

配置完成后，系统会按照设定的采集频率从设备读取数据：

- **采集频率**：可在系统设置中配置（默认100ms）
- **数据处理**：系统会对采集的数据进行处理和转换
- **标签映射**：将设备寄存器映射到系统标签

### 8.3 命令发送

系统支持向设备发送控制命令：

1. 在标签管理中找到对应的标签
2. 修改标签值
3. 系统会自动将修改后的值发送到设备

### 8.4 时序数据库集成

系统支持与时序数据库集成，用于存储和分析历史数据：

#### InfluxDB配置
1. 在系统设置中找到时序数据库配置
2. 输入InfluxDB的连接信息：
   - 服务器地址：输入InfluxDB服务器的IP地址
   - 端口：输入InfluxDB的端口（默认8086）
   - 组织：输入InfluxDB的组织名称
   - 桶：输入InfluxDB的数据桶名称
   - 令牌：输入InfluxDB的访问令牌
3. 点击"测试连接"验证连接是否成功
4. 点击"保存"应用配置

#### TimescaleDB配置
1. 在系统设置中找到时序数据库配置
2. 选择TimescaleDB作为数据库类型
3. 输入TimescaleDB的连接信息：
   - 服务器地址：输入TimescaleDB服务器的IP地址
   - 端口：输入TimescaleDB的端口（默认5432）
   - 数据库：输入TimescaleDB的数据库名称
   - 用户名：输入TimescaleDB的用户名
   - 密码：输入TimescaleDB的密码
4. 点击"测试连接"验证连接是否成功
5. 点击"保存"应用配置

### 8.5 历史数据查询

配置完成后，系统会自动将采集的数据存储到时序数据库中，您可以在"历史数据"模块中查询和分析历史数据：

1. 选择查询时间范围
2. 选择要查询的标签
3. 点击"查询"按钮获取历史数据
4. 系统会以图表形式显示查询结果
5. 支持导出查询结果为CSV或Excel文件

## 9. 报警管理

### 9.1 报警配置

系统支持为标签配置报警规则：

- **模拟量报警**：设置高限、低限、高高限、低低限
- **开关量报警**：设置状态变化报警
- **报警级别**：设置报警的优先级（低、中、高、紧急）
- **报警延迟**：设置报警触发的延迟时间，避免误报
- **报警死区**：设置报警的死区值，避免报警频繁切换

### 9.2 报警处理

当发生报警时，系统会：

- **视觉提示**：在界面上显示报警信息，包括报警级别、标签名称、当前值和报警时间
- **声音提示**：播放报警声音（可配置）
- **报警记录**：记录报警信息到系统日志
- **报警确认**：支持手动确认报警
- **报警通知**：支持邮件、短信等方式通知相关人员（需配置）

### 9.3 事件管理

系统提供事件管理功能，记录系统中的重要事件：

- **操作事件**：记录用户的操作，如登录、退出、修改配置等
- **设备事件**：记录设备的状态变化，如连接、断开、故障等
- **系统事件**：记录系统的运行状态，如启动、停止、备份等

### 9.4 报警和事件查询

系统提供报警和事件查询功能：

1. 在"报警管理"模块中找到"报警历史"或"事件历史"
2. 选择查询时间范围
3. 选择查询条件，如报警级别、标签名称、事件类型等
4. 点击"查询"按钮获取历史记录
5. 系统会以表格形式显示查询结果
6. 支持导出查询结果为CSV或Excel文件

## 10. 系统设置

### 10.1 基本设置

- **系统名称**：设置系统的显示名称
- **语言**：选择系统界面语言
- **主题**：选择界面主题（深色/浅色）

### 10.2 通信设置

- **采集频率**：设置数据采集的频率
- **超时设置**：设置通信超时时间
- **重连设置**：设置通信断开后的重连策略

### 10.3 用户管理

- **用户列表**：查看系统用户
- **添加用户**：添加新用户
- **修改密码**：修改用户密码
- **权限设置**：设置用户权限

### 10.4 时序数据库设置

- **数据库类型**：选择要使用的时序数据库类型（InfluxDB或TimescaleDB）
- **连接配置**：输入数据库的连接信息
- **存储策略**：设置数据的存储策略，如采样间隔、保留时间等

### 10.5 3D可视化设置

- **渲染质量**：设置3D场景的渲染质量（低、中、高）
- **模型路径**：设置3D模型的存储路径
- **相机设置**：设置默认相机位置和视角
- **性能优化**：设置3D渲染的性能优化选项

## 11. 故障排除

### 11.1 常见问题

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| 无法启动系统 | 缺少依赖库 | 运行 `run.sh` 脚本，或安装缺少的依赖 |
| 设备连接失败 | IP地址或端口错误 | 检查设备IP地址和端口配置 |
| 标签值不更新 | 数据采集未启动 | 检查数据采集是否激活 |
| 组件不显示 | QML插件未加载 | 检查插件是否正确构建 |
| 系统运行缓慢 | 资源不足 | 关闭不必要的应用程序，增加系统资源 |
| 时序数据库连接失败 | 连接信息错误 | 检查时序数据库的连接信息和网络连接 |
| 3D场景渲染缓慢 | 硬件性能不足 | 降低3D渲染质量，或升级硬件 |
| Docker部署失败 | Docker配置错误 | 检查Dockerfile和docker-compose.yml文件的配置 |

### 11.2 日志查看

系统会生成运行日志，可用于排查问题：

- **Windows**：日志文件位于 `%APPDATA%\SCADASystem\logs`
- **Linux**：日志文件位于 `~/.local/share/SCADASystem/logs`

### 11.3 技术支持

如果遇到无法解决的问题，请联系技术支持：

- **邮件**：support@huayan-scada.com
- **电话**：400-123-4567

## 12. 附录

### 12.1 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+N | 新建工程 |
| Ctrl+O | 打开工程 |
| Ctrl+S | 保存工程 |
| Ctrl+Z | 撤销操作 |
| Ctrl+Y | 重做操作 |
| Ctrl+D | 复制组件 |
| Delete | 删除选中组件 |
| Ctrl+F | 查找标签 |

### 12.2 术语解释

| 术语 | 解释 |
|------|------|
| SCADA | 监控与数据采集系统，用于工业过程的监控和控制 |
| Modbus | 一种工业通信协议，广泛应用于工业设备 |
| 标签 | 系统中表示数据点的基本单位，可与设备寄存器映射 |
| 组件 | 系统中的可视化元素，如指示灯、按钮、阀门等 |
| 仪表盘 | 系统的主界面，显示系统状态和关键数据 |
| 配置编辑器 | 用于设计和修改监控界面的工具 |

### 12.3 版本信息

- **当前版本**：1.1.0
- **发布日期**：2026-02-07
- **更新历史**：
  - 1.1.0：
    - 新增Docker容器化部署方案
    - 新增画布分层、对齐吸附和批量编辑功能
    - 新增工业专属组件（仪表盘、趋势图、工控按钮/指示灯等）
    - 新增离线工程导出/导入功能
    - 优化实时数据绑定和动态刷新，确保延迟＜1s
    - 新增时序数据库适配（InfluxDB/TimescaleDB）
    - 新增3D可视化能力，深度适配WebGL/Three.js
    - 新增更直观的报警和事件管理界面
  - 1.0.0：初始版本，包含基本功能

---

本手册由华颜软件技术团队编制，如有任何疑问或建议，请联系我们。

© 2026 华颜软件 保留所有权利。