# 钢铁厂例程快速体验

## 5分钟上手教程

本教程将指导您快速构建和运行钢铁厂监控平台示例，体验Huayan工业监控系统的核心功能。

### 1. 构建步骤

#### 前提条件
- Qt 6.8 或更高版本
- CMake 3.22 或更高版本
- C++17 兼容编译器

#### 构建命令

1. **进入示例目录**
   ```bash
   cd examples/steel_plant_monitoring
   ```

2. **创建构建目录**
   ```bash
   mkdir build && cd build
   ```

3. **运行CMake配置**
   ```bash
   cmake .. -DCMAKE_PREFIX_PATH=/path/to/Qt6
   ```
   其中 `/path/to/Qt6` 是您的Qt 6安装路径，例如：
   - Windows: `C:/Qt/6.8.0/msvc2019_64`
   - Linux: `/opt/Qt/6.8.0/gcc_64`

4. **编译项目**
   - Windows (MSVC):
     ```bash
     nmake
     ```
   - Linux/macOS:
     ```bash
     make
     ```

5. **运行示例**
   ```bash
   ./SteelPlantMonitoring
   ```

### 2. 核心交互操作

#### 2.1 3D可视化区
- **鼠标操作**：
  - 左键拖动：旋转视角
  - 滚轮：缩放视图
  - 右键拖动：平移视图
- **设备状态**：右侧显示高炉、转炉、轧钢的运行状态（绿色：运行中，红色：停止）
- **设备控制**：底部按钮可启动/停止各设备

#### 2.2 生产总览Dashboard
- **告警统计**：显示紧急告警和一般告警的数量
- **温度趋势**：查看高炉、转炉、轧钢的温度变化趋势
- **压力趋势**：查看高炉压力变化趋势
- **流量趋势**：查看氧气流量和冷却水流量变化趋势

#### 2.3 操作控制区
- **设备参数**：实时显示各设备的详细参数
- **数据导出**：点击"导出CSV"按钮可导出生产数据为CSV文件

#### 2.4 告警处理
- 当设备参数异常时，会弹出告警对话框
- 点击"确认"按钮可确认告警并消除告警提示

### 3. 对应Huayan功能说明

#### 3.1 核心模块复用

| 功能 | 对应Huayan模块 | 说明 |
|------|---------------|------|
| 标签管理 | TagManager | 复用Huayan的标签管理模块，管理设备的各项参数标签 |
| 数据处理 | DataProcessor | 复用Huayan的数据处理模块，处理设备数据 |
| 图表数据 | ChartDataModel | 复用Huayan的图表数据模型，管理趋势图数据 |
| 模拟数据 | SimulatedDataSource | 基于Huayan的数据源架构，实现模拟数据生成 |
| 告警管理 | 告警规则引擎 | 基于Huayan的告警规则引擎，实现设备异常告警 |

#### 3.2 功能特点

1. **高仿真场景**：还原钢铁厂核心产线的监控场景
2. **实时数据**：模拟实时生产数据，数据刷新延迟≤1秒
3. **可交互操作**：支持设备启停、视角控制等交互操作
4. **完整功能**：包含数据监控、趋势分析、告警处理、数据导出等完整功能
5. **离线运行**：内置模拟数据源，无需外部服务即可运行

### 4. 技术架构

#### 4.1 代码结构

```
steel_plant_monitoring/
├── CMakeLists.txt          # CMake配置文件
├── main.cpp                # 主入口文件
├── steel_plant_monitoring.qml  # 主界面文件
├── resources.qrc           # Qt资源文件
├── steelplantmanager.cpp   # 钢铁厂管理器
├── steelplantmanager.h     # 钢铁厂管理器头文件
├── simulateddatasource.cpp # 模拟数据源
├── simulateddatasource.h   # 模拟数据源头文件
└── 钢铁厂例程快速体验.md    # 本教程
```

#### 4.2 核心类说明

- **SteelPlantManager**：钢铁厂监控平台的核心管理类，负责管理设备状态和数据
- **SimulatedDataSource**：模拟数据源，生成模拟的工业数据
- **TagManager**：复用Huayan的标签管理模块，管理设备参数标签
- **ChartDataModel**：复用Huayan的图表数据模型，管理趋势图数据

### 5. 常见问题

#### 5.1 构建失败
- **Qt路径错误**：确保`CMAKE_PREFIX_PATH`指向正确的Qt 6安装路径
- **依赖缺失**：确保安装了Qt的所有必要模块（Core、Quick、Charts等）

#### 5.2 运行问题
- **QML模块未找到**：确保QML导入路径设置正确
- **数据不更新**：检查模拟数据源是否正常启动

#### 5.3 功能问题
- **告警不触发**：检查设备参数是否达到告警阈值
- **数据导出失败**：确保有文件写入权限

### 6. 扩展建议

- **添加真实设备连接**：修改`SimulatedDataSource`为真实的Modbus/OPC UA数据源
- **增加更多设备**：在`SteelPlantManager`中添加更多设备类型
- **优化3D场景**：添加真实的钢铁厂3D模型
- **添加历史数据查询**：集成Huayan的历史数据存储模块

---

通过本示例，您可以直观了解Huayan工业监控系统的核心功能和架构，为二次开发和定制化应用提供参考。
